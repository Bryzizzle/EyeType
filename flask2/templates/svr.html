{% extends "base.html" %}

{% block headextra %}

<!-- Tensorflow core, model, and backend-->
<!--<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs"></script>-->
<!-- TFjs version 2.7 local-->
<script src="{{url_for('static', filename='tf.min.js')}}"></script>
<script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/facemesh"></script>

<!-- Javascript specific to this page -->
<script src="{{url_for('static', filename='ML.js')}}"></script>
<script src="{{url_for('static', filename='fileIO.js')}}"></script>
<script src="{{url_for('static', filename='svr.js')}}"></script>
<script src="{{url_for('static', filename='collectioncolor.js')}}"></script>
<script src="{{url_for('static', filename='accel.js')}}"></script>


<!--Other ML library-->
<script src="{{url_for('static', filename='mlweb.js')}}"></script>

<!--Keyboard Imports-->
<link rel="stylesheet" href="{{url_for('static', filename='t9/css/style.css')}}" type="text/css" />
<link rel="stylesheet" href="{{url_for('static', filename='t9/css/bootstrap.min.css')}}" type="text/css" />
<link rel="stylesheet" href="{{url_for('static', filename='t9/css/bootstrap-theme.min.css')}}" type="text/css" />
<script type="text/javascript" src="{{url_for('static', filename='t9/js/jquery-2.0.3.min.js')}}"></script>
<script type="text/javascript" src="{{url_for('static', filename='t9/js/underscore-min.js')}}"></script>
<script type="text/javascript" src="{{url_for('static', filename='t9/js/bootstrap.js')}}"></script>
<script type="text/javascript" src="{{url_for('static', filename='t9/js/t9.js')}}"></script>
<script type="text/javascript" src="{{url_for('static', filename='t9/js/script.js')}}"></script>

<script type="text/javascript" src="{{url_for('static', filename='eyehandler.js')}}"></script>

<script>
    main();
    showDebug();
</script>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/simple-keyboard@latest/build/css/index.css"/>
<style>
    input {
        width: 100%;
        height: 100px;
        padding: 20px;
        font-size: 20px;
        border: none;
    }

    .keyboardContainer {
        /* 1 */
        /*max-width: 1000px;*/
        height: calc(90vh)
    }

    .simple-keyboard.hg-theme-default {
        /* 0.33 */
        height: 550px;
        /*height: calc(90vh * 0.33);*/
    }

    .simple-keyboard.hg-theme-default .hg-button {
        /* 0.06 */
        height: 100px;
        /*height: calc(90vh * 0.06);*/
    }

</style>

{% endblock %}


{% block body %}

<div id="main">
<!--    <button id="accelPermsButton" onclick="getAccel()">Get Accel</button>-->
    <canvas hidden id="eyecache"></canvas>

    <!-- KEYBOARD PART -->
    <div class="container" id="mainpage">
      <div class="row">
        <div class="col-md-4">

          <div class="emulator">
            <div class="screen">
              <span class="prev-text"></span><span class="current-text"></span><span class="cursor">|</span>
            </div>

            <div class="keypad">
              <div class="keypad-row">
                <button class="key key-1" value="2">
                 <small>abc</small>
                </button>
                <button class="key key-2" value="3">
                <!-- 2 <small>abc</small> -->
                <small>def</small>
                </button>
                <button class="key key-3" value="4">
                <!-- 3 <small>def</small> -->
                 <small>ghi</small>
                </button>
                <div class="controller">
                  <button class="key prediction-cycle btn"><span class="glyphicon glyphicon-refresh"></span>Cycle</button>
                </div>
              </div>

              <div class="keypad-row">
                <button class="key key-4" value="5">
                 <small>jkl</small>
                </button>
                <button class="key key-5" disabled="disabled" value="5">
                  <span>Key: <small id="debug-key"></small></span>
                  <span>Dwell Count: <small id="debug-dwell"></small></span>
                </button>
                <button class="key key-6" value="6">
                 <small>mno</small>
                </button>
                <div class="controller">
                  <button class="key delete pull-right btn"><span class="glyphicon glyphicon-circle-arrow-left"></span>Delete</button>
                </div>
              </div>

              <div class="keypad-row">
                <button class="key key-7" value="7">
                 <small>pqrs</small>
                </button>
                <button class="key key-8" value="8">
                 <small>tuv</small>
                </button>
                <button class="key key-9" value="9">
                 <small>wxyz</small>
                </button>
                <button class="key key-space" value="space">
                <small>space</small>
                </button>
              </div>
            </div>

          </div>

          <div class="loading">
            <div class="progress progress-striped active">
              <div class="progress-bar"  role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100" style="width: 0%">
              </div>
            </div>
            <p>Downloading dictionary file. Please wait...</p>
          </div>
        </div>


    </div>
    <!-- END KEYBOARD   -->

    <div hidden>
        <button id="regtoggle" class="widebutton" onclick="regr_class_toggle()" style="vertical-align: middle; margin-bottom:10px; background:#2196F3; width:100vw;"><h4>Classification</h4></button>
    </div>


    <video hidden autoplay muted playsinline id="video"  style="
              -webkit-transform: scaleX(-1);
              transform: scaleX(-1);
              visibility: hidden;
              width: auto;
              height: auto;
              ">
    </video>

</div>

<script src="{{url_for('static', filename='keyboard/build/index.js')}}"></script>
<script src="{{url_for('static', filename='swipe_keyboard/build/index.js')}}"></script>
<script src="https://cdn.jsdelivr.net/npm/simple-keyboard-autocorrect@latest/build/index.min.js"></script>
<script src="{{url_for('static', filename='src/keyboard.js')}}"></script>

<!--<div class="targetdot" style="left:50%; top:50%;"></div>-->

{% endblock %}